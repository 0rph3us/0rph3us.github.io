
<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <title>
      
        Pakete selbst bauen - 
      
      0rph3us
    </title>
    <meta name="description" content="">
    <meta name="author" content="Michael Rennecke">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/assets/themes/hooligan/css/bar.css" rel="stylesheet" type="text/css" media="all" />
<!--    <link href="/assets/themes/hooligan/css/zocial.stripped.css" rel="stylesheet" type="text/css">
    <link href="/assets/themes/hooligan/css/syntax.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/lightbox.css" rel="stylesheet" type="text/css" media="all" />
-->
    
<!-- 
    <script type="text/javascript" src="/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/js/lightbox.min.js"></script>
-->

    <!-- jquery-1.11.1.min.js and lightbox.min.js -->
    <script type="text/javascript" src="/js/a63bb257b0d48f7901f938d2f1217cbb.js" async></script>

    <!-- fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->
  </head>

  <body>
    <div id="page-wrap">
      <div class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>

            <a class="brand" href="/">0rph3us</a>

            <div class="nav-collapse">
              <ul class="nav">
                
                
                


  
    
      
    
  
    
      
      	
      	<li><a href="/about.html">Über mich</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archiv</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Kategorien</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Seiten</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



              </ul>
              <ul class="nav pull-right social visible-desktop">
                <li class="divider-vertical"></li>
                
                <li>
                  <a href="https://github.com/0rph3us" class="zocial github icon" target="_blank">
                    <span class="hidden-desktop">Github</span>
                  </a>
                </li>
                
                
                
                <li>
                  <a href="https://twitter.com/0rph3us" class="zocial twitter icon" target="_blank">
                    <span class="hidden-desktop">Twitter</span>
                  </a>
                </li>
                
                
                
                
                
                <li>
                  <a href="https://0rph3us.github.io/rss.xml" class="zocial rss icon" target="_blank">
                    <span class="hidden-desktop">RSS Feed</span>
                  </a>
                </li>
                
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="content">
          
<div class="page-header">
  <h1>
    Pakete selbst bauen 
    
  </h1>
</div>

<div class="row">
  <div class="span8">
    <p><a href="http://binfalse.de/">binfalse</a> hat mich dazu gebracht diesen Artiel zu schreiben. Die verschiedenen Paketformate der Linux-Distrubutionen können Softwareentwickler vor Probleme stellen, die ihre Software leicht installierbar gestalten möchten. Debian und Ubuntu setzen auf <a href="http://de.wikipedia.org/wiki/Debian-Paket">deb</a>-Pakete während RedHat und Fedora auf <a href="http://de.wikipedia.org/wiki/RPM_Package_Manager">rpm</a>-Pakete setzen. Diese beiden Fromate nicht nicht kompartibel zueinander. Die Werkzeuge, um die Pakte zu erstellen können viele als unnötig kompliziert befinden. Das schreckt ab, wenn man das Paket nur für sich oder für eine kleine Gruppe von Nutzern baut. Es ist auch durchaus sinnvoll <strong>Sktripte</strong> zu paketetieren, da sich die Paketverwaltung um die Anhänigkeiten kümmern kann.</p>

<p>Um unnötige Komplikationen zu vermeiden, gibt es Tool <a href="https://github.com/jordansissel/fpm/wiki">fpm</a>. Es kann unter anderm deb- und rpm-Pakete erstellen. fpm ist in <a href="https://www.ruby-lang.org/de/">ruby</a> geschrieben. Aus diesem Grund muss man etwas Vorarbeit leisten.</p>

<h3>Installation von fpm unter Ubuntu/Debian</h3>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">sudo apt-get update
sudo apt-get install ruby-dev build-essential
sudo gem install fpm
</code></pre></div>
<p>Wenn das <a href="http://guides.rubygems.org/what-is-a-gem/">gem</a> <code>fpm</code> installiert ist, dann gibt es den Befehl <code>fpm</code> im <code>PATH</code>. Man kann das ganze wie folgt testen:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">fpm -h
Intro:

  This is fpm version 1.3.3

  If you think something is wrong, it<span class="err">&#39;</span>s probably a bug! :<span class="o">)</span>
  Please file these here: https://github.com/jordansissel/fpm/issues

  You can find support on irc <span class="o">(</span><span class="c">#fpm on freenode irc) or via email with</span>
  fpm-users@googlegroups.com

Usage:
    fpm <span class="o">[</span>OPTIONS<span class="o">]</span> <span class="o">[</span>ARGS<span class="o">]</span> ...

...
</code></pre></div>
<p>Nun kann man anfangen Pakte zu bauen. Ein Aufruf sieht im einfachsten Fall so aus: <code>fpm -s source_type -t target_type  source_name_or_location</code> Der <strong>source_type</strong> bzw. <strong>target_type</strong> können die verschiedensten Paketformate sein. Einige Pakettype benötigen Hilfsprogramme, damit <code>fpm</code> sie erstellen kann. Da ich annehme, dass <code>fpm</code> auf einen Debian bzw. Ubuntu benutzt wird, zeige ich im folgenden Beispiel wie man aus einen <a href="http://guides.rubygems.org/what-is-a-gem/">ruby</a> ein deb-Paket baut.</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">fpm -s gem -t deb bundler
Erstellt package <span class="o">{</span>: <span class="nv">path</span> <span class="o">=</span>&gt; <span class="s2">&quot;rubygem-bundler_1.6.5_all.deb&quot;</span><span class="o">}</span>
</code></pre></div>
<p>Es wird die Datei <code>rubygem-bundler_1.6.5_all.deb</code> im aktuellen Verzeichnis erstellt. (Ihre Versionsnummer kann abweichen). Diese kann man dann ganz einfach installieren (oder zu einen Repository hinzufügen).</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">sudo dpkg -i rubygem-bundler_1.6.5_all.de
</code></pre></div>
<p>Wenn die Quelle ein <strong>Standart Reporitory</strong> wie <a href="https://rubygems.org/">rubygems.org</a> für ruby gems  oder  <a href="https://www.npmjs.com/">npm</a> für <a href="http://nodejs.org/">nodejs</a> Pakete, dann ist fpm in der Lage automatisch alle benötigten Dateien herunterzuladen.</p>

<p>Es ist auch sehr einfach möglich fremde Software zu packen, welche man compilieren muss. Im Allgemeinen sieht das wie folgt aus:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c"># Vorbereitung</span>
mkdir ~/build
<span class="nb">cd</span> ~/build
git clone https://github.com/cool/cool-app
<span class="nb">cd </span>cool-app

<span class="c"># bauen</span>
make
mkdir -p /tmp/cool-app 
make install <span class="nv">DESTDIR</span><span class="o">=</span>/tmp/cool-app
fpm -s -t dir deb -C /tmp/cool-app <span class="se">\</span>
  --name cool-app-name <span class="se">\</span>
  --version 1.0.0 <span class="se">\</span>
  --iteration <span class="m">1</span> <span class="se">\</span>
  --depends <span class="s2">&quot;Abhänigkeit 1 (&gt;= 2.0.0)&quot;</span> <span class="se">\</span>
  --depends <span class="s2">&quot;Abhänigkeit 2&quot;</span> <span class="se">\</span>
  --description <span class="s2">&quot;Ein Beispielpaket&quot;</span> <span class="se">\</span>
 .

fpm -s -t dir rpm -C /tmp/cool-app <span class="se">\</span>
  --name cool-app-name <span class="se">\</span>
  --version 1.0.0 <span class="se">\</span>
  --iteration <span class="m">1</span> <span class="se">\</span>
  --depends <span class="s2">&quot;Abhänigkeit 1 (&gt;= 2.0.0)&quot;</span> <span class="se">\</span>
  --depends <span class="s2">&quot;Abhänigkeit 2&quot;</span> <span class="se">\</span>
  --description <span class="s2">&quot;Ein Beispielpaket&quot;</span> <span class="se">\</span>
  .
</code></pre></div>
<p>Man erhält dann im aktuellen Verzeichnis ein <code>rpm</code>- und ein <code>deb</code>-Paket. So kann man einfach und schnell Pakete für das eigene System bauen oder für andere, wenn man z.B. selbst Software bereit stellt. Man kann auch statt des <code>.</code> am Ende des <code>fpm</code>-Komandos sagt, dass der gesamte Inhalt von unter <code>/tmp/cool-app</code> in das Paket soll. Man kann/sollte auch die Vezeichnisse einzeln angeben z.B. <code>etc/cool-app usr/bin usr/share/man</code>.</p>

<h4>Sources</h4>

<ul>
<li><strong>gem</strong> ruby-gem (automatischer Download)</li>
<li><strong>python</strong> <a href="https://www.python.org/">python</a>-Module, welche <code>easy_install</code> unterstützen (automatischer Download)</li>
<li><strong>pear</strong> <a href="http://php.net/">php</a>-Module (automatischer Download von <a href="http://pear.php.net/">pear.php.net</a>)</li>
<li><strong>dir</strong> Verzeichnis</li>
<li><strong>tar</strong> <a href="http://de.wikipedia.org/wiki/Tar">tar</a>-Archiv</li>
<li><strong>pear</strong> php-Module (automatischer Download)</li>
<li><strong>rpm</strong> <a href="http://de.wikipedia.org/wiki/RPM_Package_Manager">rpm</a>-Paket</li>
<li><strong>deb</strong> deb-Paket</li>
<li><strong>zip</strong> <a href="http://de.wikipedia.org/wiki/ZIP-Dateiformat">zip</a>-Archiv</li>
<li><strong>empty</strong> erzeugt ein leeres Paket, welches man oft für Metapakte benutzt</li>
<li><strong>npm</strong> nodejs Module (automaticher Download)</li>
<li><strong>cpan</strong> peal-Module (automatischer Download)</li>
<li><strong>osxpkg</strong> Mac OS X Pakete (nur auf Mac verfügbar)</li>
</ul>

<h4>Targets</h4>

<ul>
<li><strong>deb</strong></li>
<li><strong>rpm</strong></li>
<li><strong>zip</strong></li>
<li><strong>tar</strong></li>
<li><strong>dir</strong></li>
<li><strong>sh</strong> (selbst entpackendes Shell skript, welches ein <a href="http://www.bzip.org/">bzip2</a> gepacktes tar enthält)</li>
<li><strong>osxpkg</strong> (nur auf Mac verfügbar)</li>
<li><strong>solaris</strong> Solaris Pakete (nur auf Solaris möglich)</li>
<li><strong>pkgin</strong> BSD pakete (nur auf BSD möglich)</li>
<li><strong>puppet</strong> (<a href="http://puppetlabs.com/puppet/what-is-puppet">puppet</a>-Modul, aktuell noch nicht implementiert)</li>
</ul>

    <hr>
    <div class="pagination btn-group">
      
        <a class="btn prev" href="/linux/tools/2015/02/15/modernes-logging/" title="Modernes Logging">&larr; &Auml;lter</a>
      
        <a class="btn" href="/archive.html">Archiv</a>
      
        <a class="btn next" href="/linux/tools/2015/02/24/modernes-logging-teil-2/" title="Modernes Logging Teil 2">Neuer &rarr;</a>
      
    </div>
    





  </div>
  
  <div class="span4">
    <section>
      <h4>Ver&ouml;ffentlicht</h4>
      <div class="date"><span>19.02.2015</span></div>
    </section>
    <section>
      <h4>Letzte &Auml;nderung</h4>
      <div class="date"><span></span>19.05.2015 12:47 Uhr</div>
    </section>
    
      <section>
        <h4>Kategorie</h4>
        <span class="category">
          linux
        </span>
      </section>
         
    
      <section>
        <h4>Tags</h4>
        <ul class="tag_box">
          
          


  
     
    	<li><a href="/tags.html#paket-ref">paket <span>1</span></a></li>
     
    	<li><a href="/tags.html#fpm-ref">fpm <span>1</span></a></li>
     
    	<li><a href="/tags.html#deb-ref">deb <span>1</span></a></li>
    
  



        </ul>
      </section>
             
  </div>
</div>


        </div>
        <hr>
      </div> <!-- /container -->

      <div class="footer-push"></div>
    </div><!--/.page-wrap -->

    <footer>
      <div class="container">
        <p>&copy; 2015 Michael Rennecke, some rights reserved</p>
        <p>Diese Seite ist unter der <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a> lizenziert.</p>
      </div>
    </footer>

    <script>window.jQuery || document.write('<script src="/assets/themes/hooligan/js/jquery.min.js"><\/script>')</script>
    <script type="text/javascript" src="/assets/themes/hooligan/bootstrap/js/bootstrap.min.js"></script>

    
  </body>
</html>

