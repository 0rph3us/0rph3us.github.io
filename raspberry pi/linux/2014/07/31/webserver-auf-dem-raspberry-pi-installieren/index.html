
<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <title>
      
        Webserver auf dem Raspberry Pi installieren - 
      
      0rph3us
    </title>
    <meta name="description" content="">
    <meta name="author" content="Michael Rennecke">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/assets/themes/hooligan/css/zocial.stripped.css">
    <link href="/assets/themes/hooligan/css/syntax.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/lightbox.css" rel="stylesheet" type="text/css" media="all" />

    
<!-- 
    <script type="text/javascript" src="/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/js/lightbox.min.js"></script>
-->

    <!-- jquery-1.11.1.min.js and lightbox.min.js -->
    <script type="text/javascript" src="/js/a63bb257b0d48f7901f938d2f1217cbb.js"></script>

    <!-- fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->
  </head>

  <body>
    <div id="page-wrap">
      <div class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>

            <a class="brand" href="/">0rph3us</a>

            <div class="nav-collapse">
              <ul class="nav">
                
                
                


  
    
      
    
  
    
      
      	
      	<li><a href="/about.html">Über mich</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archiv</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Kategorien</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Seiten</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



              </ul>
              <ul class="nav pull-right social visible-desktop">
                <li class="divider-vertical"></li>
                
                <li>
                  <a href="https://github.com/0rph3us" class="zocial github icon" target="_blank">
                    <span class="hidden-desktop">Github</span>
                  </a>
                </li>
                
                
                
                <li>
                  <a href="https://twitter.com/0rph3us" class="zocial twitter icon" target="_blank">
                    <span class="hidden-desktop">Twitter</span>
                  </a>
                </li>
                
                
                
                
                
                <li>
                  <a href="https://0rph3us.github.io/rss.xml" class="zocial rss icon" target="_blank">
                    <span class="hidden-desktop">RSS Feed</span>
                  </a>
                </li>
                
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="content">
          
<div class="page-header">
  <h1>
    Webserver auf dem Raspberry Pi installieren 
    
  </h1>
</div>

<div class="row">
  <div class="span8">
    <p>Da man auf dem <a href="http://www.raspberrypi.org/">Raspberry Pi</a> nicht sehr viele Ressourcen zur Verfügung hat, scheidet <a href="http://httpd.apache.org/">Apache</a> als
Webserver für mich aus. Ich habe <a href="http://www.lighttpd.net/">lighttpd</a> und <a href="http://nginx.org">Nginx</a> ausprobiert. Von <a href="http://www.lighttpd.net/">lighttpd</a> war ich am 
Anfang sehr überzeugt. Er kann alles was man benötigt. Als mein Setup komplizierter wurde, war
ich nicht mehr in Lage in die Ideen mit <a href="http://www.lighttpd.net/">lighttpd</a> umzusetzen. Die Ursache liegt weniger im
Funktionsumfang, sondern an den zur Verfügung stehenden Tutorials, Beispielkonfigurationen sowie der
Default-Konfiguration wenn man <a href="http://www.lighttpd.net/">lighttpd</a> bei Raspbian installiert. Den endgültigen <em>Todesstoß</em> hat
<a href="http://www.lighttpd.net/">lighttpd</a> bekommen, als ich <a href="https://www.phusionpassenger.com/">Passanger</a> ausprobieren wollte. Für <a href="http://httpd.apache.org/">Apache</a> und <a href="http://nginx.org">Nginx</a> gibt es fertige
<a href="https://www.phusionpassenger.com/">Passanger</a>-Module bzw. funktionierenden Install-Skripte. Ich möchte nicht sagen, dass <a href="http://www.lighttpd.net/">lighttpd</a> schlechter
als <a href="http://nginx.org">Nginx</a> ist, aber ich bin bei &quot;komplexen&quot; Setups mit mehreren virtuellen Hosts und rewrite-Magie
besser mit <a href="http://nginx.org">Nginx</a> zurecht gekommen.</p>

<p>Im folgenden werde ich mich auf <a href="http://nginx.org">Nginx</a> <em>Engine-X</em> konzentrieren. da es für ihn sehr viele Tutorials
gibt und er sehr ressourcenschonend ist, ist er meiner Meinung nach die erste Wahl für den <a href="http://www.raspberrypi.org/">Raspberry Pi</a>.</p>

<p>Viele werden mit nur einen Webserver nicht glücklich, weil ein Webserver nur statische Inhalte ausliefert.
Damit Nginx php ausliefern kann benötigt man php auf seinen Rechner sowie den 
PHP Fast CGI Process Manager. Dieser verwaltet php-Prozesse, welche wiederum statisches HTML generieren
und an den Nginx weiter geben.</p>

<h2>Nginx mit php installieren und einrichten</h2>

<p>Vor der Installation von neuen Pakten sollte man nachsehen, ob es Updates gibt. Ein 
sicherheitsbewusster Admin aktualisiert jeden Tag seine Systeme,
gerade wenn sie öffentlich erreichbar sind.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># zu root werden</span>
sudo su -

apt-get update
apt-get upgrade

apt-get install nginx php5-fpm php5-cgi php5-cli php5-common</code></pre></div>

<h3>Nginx konfigurieren</h3>

<p>Wenn man nur einen virtuellen Host einrichten möchte, kann man die gesamte Konfiguration in der
<code>/etc/nginx/ningx.conf</code> erledigen. Das Aufteilen der Konfiguration in mehrere Dateien macht diese
übersichtlicher. Somit ist es auch möglich virtuelle Host zu aktivieren und zu deaktivieren.</p>

<p>Meine Empfehlung ist, dass jede Applikation/Seite ein eigener Host ist. So hat jede Applikation
ihr eigenes Log-File und eine übersichtliche Konfiguration.
Der Nachteil ist, dass man mehrere (Sub) Domains benötigt. Das ist nicht
mit allen Dyndns Anbietern möglich.</p>

<p>Konfigurationen, welche global gültig sind, schreibe ich auch
in die <code>/etc/nginx/ningx.conf</code>. Das sind z.B. ssl-Offloading, Redirekt zu https und die 
ssl-Konfiguration.</p>

<p>Das ist eine exemplarische Konfiguration eines Host, welcher php ausführt und auf Port 80 lauscht.
Der Host lauscht auf die Namen <em>localhost</em> und <em>awesomephp.example.com</em>. Port 80 ist der
Standardport für http. Wenn ihr nur einen Host konfiguriert habt (nur ein server-Abschnitt), dann
wird dieser immer genommen, unabhängig davon was im host-Header der Anfrage steht.</p>

<div class="highlight"><pre><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span> <span class="s">awesomephp.example.com</span><span class="p">;</span>
    
    <span class="kn">root</span> <span class="s">/var/www/awesomephp</span><span class="p">;</span>
    <span class="kn">index</span> <span class="s">index.html</span> <span class="s">index.php</span><span class="p">;</span>
    
    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="nv">$uri/</span> <span class="s">/index.php?</span><span class="nv">$args</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="p">~</span> <span class="sr">^(.+\.php)(.*)$</span> <span class="p">{</span>
        <span class="kn">try_files</span> <span class="nv">$fastcgi_script_name</span> <span class="p">=</span><span class="mi">404</span><span class="p">;</span>
        <span class="kn">fastcgi_split_path_info</span>  <span class="s">^(.+\.php)(.*)</span>$<span class="p">;</span>
        <span class="kn">fastcgi_pass</span>   <span class="s">unix:/var/run/php5-fpm.sock</span><span class="p">;</span>
        <span class="kn">fastcgi_param</span>  <span class="s">SCRIPT_FILENAME</span>  <span class="nv">$document_root$fastcgi_script_name</span><span class="p">;</span>
        <span class="kn">fastcgi_param</span>  <span class="s">PATH_INFO</span>        <span class="nv">$fastcgi_path_info</span><span class="p">;</span>
        <span class="kn">include</span>        <span class="s">/etc/nginx/fastcgi_params</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">access_log</span>      <span class="s">/var/log/nginx/awesome.access.log</span><span class="p">;</span>
    <span class="kn">error_log</span>       <span class="s">/var/log/nginx/awesome.error.log</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>Nachdem der Nginx konfiguriert ist muss man die Konfiguration nur noch neu laden.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">service nginx reload</code></pre></div>

<h3>Test der Konfiguration</h3>

<p>Nachdem der Nginx fehlerfrei seine Konfiguration neu geladen hat bzw. neu gestartet wurde kann man sie mit dem
folgenden Minimalbeispiel testen: </p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir -p /var/www/awesomephp
<span class="nb">echo</span> <span class="s2">&quot;&lt;? phpinfo(); /&gt;&quot;</span> &gt; /var/www/awesomephp/info.php</code></pre></div>

<p>Wenn nur ein Host konfiguriert ist, dann kann man jetzt Browser <code>http://192.168.1.100/info.php</code> aufrufen
und es erscheint eine Übersicht der php-Einstellungen. Ich gehe davon aus, dass der Raspberry Pi die IP
192.168.1.100 hat.</p>

    <hr>
    <div class="pagination btn-group">
      
        <a class="btn prev" href="/privat/raspberry%20pi/2014/07/30/mein-raspberry-pi/" title="Mein Raspberry Pi">&larr; &Auml;lter</a>
      
        <a class="btn" href="/archive.html">Archiv</a>
      
        <a class="btn next" href="/privat/2014/08/11/ich-werde-modern/" title="Ich werde modern">Neuer &rarr;</a>
      
    </div>
    





  </div>
  
  <div class="span4">
    <section>
      <h4>Ver&ouml;ffentlicht</h4>
      <div class="date"><span>31.07.2014</span></div>
    </section>
    <section>
      <h4>Letzte &Auml;nderung</h4>
      <div class="date"><span></span>04.03.2015 09:21 Uhr</div>
    </section>
    
      <section>
        <h4>Kategorie</h4>
        <span class="category">
          Raspberry Pi, Linux
        </span>
      </section>
         
    
      <section>
        <h4>Tags</h4>
        <ul class="tag_box">
          
          


  
     
    	<li><a href="/tags.html#php-ref">php <span>2</span></a></li>
     
    	<li><a href="/tags.html#Nginx-ref">Nginx <span>2</span></a></li>
     
    	<li><a href="/tags.html#Raspbian-ref">Raspbian <span>3</span></a></li>
     
    	<li><a href="/tags.html#Linux-ref">Linux <span>8</span></a></li>
     
    	<li><a href="/tags.html#Raspberry Pi-ref">Raspberry Pi <span>6</span></a></li>
    
  



        </ul>
      </section>
             
  </div>
</div>


        </div>
        <hr>
      </div> <!-- /container -->

      <div class="footer-push"></div>
    </div><!--/.page-wrap -->

    <footer>
      <div class="container">
        <p>&copy; 2015 Michael Rennecke, some rights reserved</p>
        <p>Diese Seite ist unter der <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a> lizenziert.</p>
      </div>
    </footer>

    <script>window.jQuery || document.write('<script src="/assets/themes/hooligan/js/jquery.min.js"><\/script>')</script>
    <script type="text/javascript" src="/assets/themes/hooligan/bootstrap/js/bootstrap.min.js"></script>

    
  </body>
</html>

