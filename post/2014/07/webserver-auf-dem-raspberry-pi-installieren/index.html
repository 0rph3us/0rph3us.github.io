<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de-DE" lang="de-DE">

<head>
  <title>
    Webserver auf dem Raspberry Pi installieren // Michael im Netz
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.16-DEV" />

  <meta property="og:title" content="Webserver auf dem Raspberry Pi installieren" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="https://0rph3us.github.io/post/2014/07/webserver-auf-dem-raspberry-pi-installieren/" />


  
  
  

    
    
    <link rel="stylesheet" href="https://0rph3us.github.io/css/6c4ae43c-ac4d-4a71-ab4f-4cd485c2ac5f.css">

  
  


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

    
  
  <link rel="stylesheet" href="https://0rph3us.github.io/css/solarized_light-8.7.min.css">
  
  <script src="https://0rph3us.github.io/js/highlight-8.7.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  
</head>

<body>
	

	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	

    <h1 class="brand-title"><a href="https://0rph3us.github.io">Michael Rennecke</a></h1>
    <h2 class="brand-tagline">Meine Gedanken zu Sicherheit, Linux und Random Stuff</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="https://0rph3us.github.io">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/about/">Über mich</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/links/">Links</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/spickzettel/">Spickzettel</a></li>
        
      </ul>
    </nav>

    
    <div class="zozial-buttons">
      
        
        <a href="https://github.com/0rph3us" target="_blank"><i class='fa fa-github'></i></a>
        
      
        
        <a href="https://twitter.com/0rph3us" target="_blank"><i class='fa fa-twitterhack'></i></a>
        
      
        
        <a href="https://0rph3us.github.io/rss.xml" target="_blank"><i class='fa fa-rss'></i></a>
        
      
      
    </div>
    

  </div>
</div>

	
	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a id="top"></a>
		

		
			
		    <div id="toc" class="pure-u-1 pure-u-md-1-4">
				<small class="toc-label">Inhalt</small>
		   	 	<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#nginx-mit-php-installieren-und-einrichten:db017475119777d596b8e698842c0f61">Nginx mit php installieren und einrichten</a>
<ul>
<li><a href="#nginx-konfigurieren:db017475119777d596b8e698842c0f61">Nginx konfigurieren</a></li>
<li><a href="#test-der-konfiguration:db017475119777d596b8e698842c0f61">Test der Konfiguration</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
		    </div>
		    
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/post/2014/07/webserver-auf-dem-raspberry-pi-installieren/">Webserver auf dem Raspberry Pi installieren</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>31</sup></span><span class="post-date-separator">/</span><span class="post-date-month"> Juli</span> <span class="post-date-year">2014</span>
            	</span>
            	
            
            	
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-raspberry-pi" href="https://0rph3us.github.io/categories/raspberry-pi">Raspberry Pi</a>
				
					<a class="post-category post-category-linux" href="https://0rph3us.github.io/categories/linux">Linux</a>
				
				</div>
			

			

			

            

<p>Da man auf dem <a href="http://www.raspberrypi.org/">Raspberry Pi</a> nicht sehr viele Ressourcen zur Verfügung hat, scheidet <a href="http://httpd.apache.org/">Apache</a> als
Webserver für mich aus. Ich habe <a href="http://www.lighttpd.net/">lighttpd</a> und <a href="http://nginx.org">Nginx</a> ausprobiert. Von <a href="http://www.lighttpd.net/">lighttpd</a> war ich am
Anfang sehr überzeugt. Er kann alles was man benötigt. Als mein Setup komplizierter wurde, war
ich nicht mehr in Lage in die Ideen mit <a href="http://www.lighttpd.net/">lighttpd</a> umzusetzen. Die Ursache liegt weniger im
Funktionsumfang, sondern an den zur Verfügung stehenden Tutorials, Beispielkonfigurationen sowie der
Default-Konfiguration wenn man <a href="http://www.lighttpd.net/">lighttpd</a> bei Raspbian installiert. Den endgültigen <em>Todesstoß</em> hat
<a href="http://www.lighttpd.net/">lighttpd</a> bekommen, als ich <a href="https://www.phusionpassenger.com/">Passanger</a> ausprobieren wollte. Für <a href="http://httpd.apache.org/">Apache</a> und <a href="http://nginx.org">Nginx</a> gibt es fertige
<a href="https://www.phusionpassenger.com/">Passanger</a>-Module bzw. funktionierenden Install-Skripte. Ich möchte nicht sagen, dass <a href="http://www.lighttpd.net/">lighttpd</a> schlechter
als <a href="http://nginx.org">Nginx</a> ist, aber ich bin bei &ldquo;komplexen&rdquo; Setups mit mehreren virtuellen Hosts und rewrite-Magie
besser mit <a href="http://nginx.org">Nginx</a> zurecht gekommen.</p>

<p>Im folgenden werde ich mich auf <a href="http://nginx.org">Nginx</a> <em>Engine-X</em> konzentrieren. da es für ihn sehr viele Tutorials
gibt und er sehr ressourcenschonend ist, ist er meiner Meinung nach die erste Wahl für den <a href="http://www.raspberrypi.org/">Raspberry Pi</a>.</p>

<p>Viele werden mit nur einen Webserver nicht glücklich, weil ein Webserver nur statische Inhalte ausliefert.
Damit Nginx php ausliefern kann benötigt man php auf seinen Rechner sowie den
PHP Fast CGI Process Manager. Dieser verwaltet php-Prozesse, welche wiederum statisches HTML generieren
und an den Nginx weiter geben.</p>

<h2 id="nginx-mit-php-installieren-und-einrichten:db017475119777d596b8e698842c0f61">Nginx mit php installieren und einrichten</h2>

<p>Vor der Installation von neuen Pakten sollte man nachsehen, ob es Updates gibt. Ein
sicherheitsbewusster Admin aktualisiert jeden Tag seine Systeme,
gerade wenn sie öffentlich erreichbar sind.</p>

<pre><code># zu root werden
sudo su -

apt-get update
apt-get upgrade

apt-get install nginx php5-fpm php5-cgi php5-cli php5-common
</code></pre>

<h3 id="nginx-konfigurieren:db017475119777d596b8e698842c0f61">Nginx konfigurieren</h3>

<p>Wenn man nur einen virtuellen Host einrichten möchte, kann man die gesamte Konfiguration in der
<code>/etc/nginx/ningx.conf</code> erledigen. Das Aufteilen der Konfiguration in mehrere Dateien macht diese
übersichtlicher. Somit ist es auch möglich virtuelle Host zu aktivieren und zu deaktivieren.</p>

<p>Meine Empfehlung ist, dass jede Applikation/Seite ein eigener Host ist. So hat jede Applikation
ihr eigenes Log-File und eine übersichtliche Konfiguration.
Der Nachteil ist, dass man mehrere (Sub) Domains benötigt. Das ist nicht
mit allen Dyndns Anbietern möglich.</p>

<p>Konfigurationen, welche global gültig sind, schreibe ich auch
in die <code>/etc/nginx/ningx.conf</code>. Das sind z.B. ssl-Offloading, Redirekt zu https und die
ssl-Konfiguration.</p>

<p>Das ist eine exemplarische Konfiguration eines Host, welcher php ausführt und auf Port 80 lauscht.
Der Host lauscht auf die Namen <em>localhost</em> und <em>awesomephp.example.com</em>. Port 80 ist der
Standardport für http. Wenn ihr nur einen Host konfiguriert habt (nur ein server-Abschnitt), dann
wird dieser immer genommen, unabhängig davon was im host-Header der Anfrage steht.</p>

<pre><code>server {
    listen 80;
    server_name localhost awesomephp.example.com;
    
    root /var/www/awesomephp;
    index index.html index.php;
    
    location / {
        try_files $uri $uri/ /index.php?$args;
    }

    location ~ ^(.+\.php)(.*)$ {
        try_files $fastcgi_script_name =404;
        fastcgi_split_path_info  ^(.+\.php)(.*)$;
        fastcgi_pass   unix:/var/run/php5-fpm.sock;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        fastcgi_param  PATH_INFO        $fastcgi_path_info;
        include        /etc/nginx/fastcgi_params;
    }

    access_log      /var/log/nginx/awesome.access.log;
    error_log       /var/log/nginx/awesome.error.log;
}
</code></pre>

<p>Nachdem der Nginx konfiguriert ist muss man die Konfiguration nur noch neu laden.</p>

<pre><code>service nginx reload
</code></pre>

<h3 id="test-der-konfiguration:db017475119777d596b8e698842c0f61">Test der Konfiguration</h3>

<p>Nachdem der Nginx fehlerfrei seine Konfiguration neu geladen hat bzw. neu gestartet wurde kann man sie mit dem
folgenden Minimalbeispiel testen:</p>

<pre><code>mkdir -p /var/www/awesomephp
echo &quot;&lt;? phpinfo(); /&gt;&quot; &gt; /var/www/awesomephp/info.php
</code></pre>

<p>Wenn nur ein Host konfiguriert ist, dann kann man jetzt Browser <code>http://192.168.1.100/info.php</code> aufrufen
und es erscheint eine Übersicht der php-Einstellungen. Ich gehe davon aus, dass der Raspberry Pi die IP
192.168.1.100 hat.</p>

	
			

			
				<div class="tags-list">
					<span class="dark-red">Tags</span><span class="decorative-marker">//</span>
					
	                <a class="post-tag post-tag-raspberry-pi" href="https://0rph3us.github.io/tags/raspberry-pi">Raspberry Pi</a>,
	                
	                <a class="post-tag post-tag-linux" href="https://0rph3us.github.io/tags/linux">Linux</a>,
	                
	                <a class="post-tag post-tag-raspbian" href="https://0rph3us.github.io/tags/raspbian">Raspbian</a>,
	                
	                <a class="post-tag post-tag-nginx" href="https://0rph3us.github.io/tags/nginx">Nginx</a>,
	                
	                <a class="post-tag post-tag-php" href="https://0rph3us.github.io/tags/php">php</a>,
	                
				</div>
			

			
				<div class="paging">
					<span class="paging-label">Mehr zum lesen</span>
					
					<div class="paging-newer">
						<span class="dark-red">Neuer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/post/2014/08/ich-werde-modern/">Ich werde modern</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Älter</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/post/2014/07/mein-raspberry-pi/">Mein Raspberry Pi</a>
		            </div>
		            
	            </div>
            
          </section>
          
          	
          
        
      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p>Diese Seite ist unter der <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a> lizenziert.</p>
</div>
    </div>
  </div>
	

	

  

</body>
</html>
