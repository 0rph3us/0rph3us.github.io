<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pam Mount on Michael im Netz</title>
    <link>https://0rph3us.github.io/tags/pam-mount/</link>
    <description>Recent content in Pam Mount on Michael im Netz</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>de-DE</language>
    <copyright>Diese Seite ist unter der &lt;a href=&#34;http://creativecommons.org/licenses/by-sa/4.0/&#34;&gt;Creative Commons Attribution-ShareAlike 4.0 International License&lt;/a&gt; lizenziert.</copyright>
    <lastBuildDate>Fri, 25 Mar 2011 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://0rph3us.github.io/tags/pam-mount/rss/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>verschlüsseltes home automatisch mounten</title>
      <link>https://0rph3us.github.io/post/2011/03/verschl%C3%BCsseltes-home-automatisch-mounten/</link>
      <pubDate>Fri, 25 Mar 2011 00:00:00 +0000</pubDate>
      
      <guid>https://0rph3us.github.io/post/2011/03/verschl%C3%BCsseltes-home-automatisch-mounten/</guid>
      <description>

&lt;p&gt;Ich bin inzwischen auf &lt;a href=&#34;http://www.debian.org/&#34;&gt;Debian&lt;/a&gt; umgestiegen. Mein home sollte natürlich verschlüsselt sein. Wenn man zum verschlüsseln
&lt;a href=&#34;http://www.saout.de/misc/dm-crypt/&#34;&gt;dm-crypt&lt;/a&gt;/&lt;a href=&#34;http://linux.die.net/man/8/cryptsetup&#34;&gt;LUKS&lt;/a&gt; nutzt und die Dateisysteme in der &lt;code&gt;/etc/crypttab&lt;/code&gt; einbindet,
muss man beim booten das Passwort eingeben (Ich setzte voraus, dass man via Passwort verschlüsselt und nicht mit einem Keyfile). Es ist viel
interessanter, wenn das home beim anmelden automatisch gemountet wird. Das geht, wenn man &lt;a href=&#34;http://pam-mount.sourceforge.net/&#34;&gt;pam_mount&lt;/a&gt; benutzt.
Im folgenden beschreibe ich wie man ein verschlüsseltes home anlegt, welches automatisch gemountet wird.&lt;/p&gt;

&lt;h2 id=&#34;vorbereitung-anlegen-eines-volume-ich-nutze-lvm:a1b250d963e63d4efc9c74d05c217ed9&#34;&gt;Vorbereitung: Anlegen eines Volume (ich nutze lvm)&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;cryptsetup luksFormat --cipher aes-cbc-essiv:sha256 /dev/data-group/home_rennecke
cryptsetup luksOpen /dev/data-group/home_rennecke data--group--home_rennecke_crypt
mkfs.ext4 /dev/mapper/data--group--home_rennecke_crypt
cryptsetup luksClose /dev/mapper/data--group--home_rennecke_crypt
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Damit das home automatisch gemountet wird muss man in der &lt;code&gt;/etc/security/pam_mount.conf.xml&lt;/code&gt; das folgende einfügen:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- Volume definitions --&amp;gt;
&amp;lt;volume user=&amp;quot;rennecke&amp;quot; fstype=&amp;quot;crypt&amp;quot; path=&amp;quot;/dev/mapper/data--group-home--rennecke&amp;quot; mountpoint=&amp;quot;/home/rennecke&amp;quot; options=&amp;quot;fsck,noatime&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Das Passwort vom verschlüsselten home und das Passwort vom login müssen gleich sein! Wenn man sich nun einloggt, dann wird das home automatisch eingehangen.&lt;/p&gt;

&lt;h2 id=&#34;hinweis:a1b250d963e63d4efc9c74d05c217ed9&#34;&gt;Hinweis:&lt;/h2&gt;

&lt;p&gt;Das &lt;code&gt;pam_mount&lt;/code&gt;-Modul arbeitet nicht ganz transparent! mount zeigt nicht die wirklichen mount-Punkte an. Diese werden aber mit &lt;code&gt;cat /proc/mount&lt;/code&gt; angezeigt.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>